<html>
<head>
	<title>Test App 1</title>
	<style type="text/css">
		body {
			font-size: 13px;
		}
		#errDiv {
			border: 1px solid #d50000;
			padding: 5px 10px;
			color: #d50000;
		}
		#errDiv p {
			margin: 0;
			padding: 0;
		}
		#goodResult {
			border: 1px solid #00d500;
			padding: 5px 10px;
			color: #00a500;
		}
	</style>
	<script type="text/javascript">
		function showError(err) {
			var errDiv = document.getElementById('errDiv');
			errDiv.removeAttribute('style');
			errDiv.innerHTML = "<p><strong>Exception:</strong> " + err + "</p>";
		}

		function init() {
			try {
				xawa.init();
				// show recipient JID
				document.getElementById('recipientJID').innerHTML = "<strong>" + xawa.getRecipient() + "</strong>";
			}
			catch(err) {
				showError(err);
				// if init() fails, there's no reason to continue
				window.stop();
			}
		}

		function foo() {
			try {
				var goodResult = document.getElementById('goodResult');
				goodResult.removeAttribute('style');
				goodResult.innerHTML = xawa;
				goodResult.innerHTML += "<p><strong>Python object method call test</strong><br/>xawa.getXawaVersion() = " + xawa.getXawaVersion() + "</p>";
			}
			catch(err) {
				showError(err);
			}

			return false;
		}

		function sendMessage() {
			try {
				var message = document.getElementById('messagebox').value;
				xawa.sendMessage(message);
			}
			catch(err) {
				showError(err);
			}

			return false;
		}
	</script>
</head>
<body onLoad="init();">
	<h1>Test App 1</h1>
	<div id="xawaInfo">
		Recipient: <span id="recipientJID"></span>
	</div>

	<div id="goodResult" style="display: none;"></div>
	<div id="errDiv" style="display: none;"></div>
	<hr />

	<input type="submit" value="test xawa" onClick="javascript: foo();" />
	<hr />

	<h2>Send message</h2>
	<table>
		<tr><th></th><td><input type="text" id="messagebox" /></td></tr>
		<tr><th></th><td><input type="submit" id="sendMessageButton" value="Send message!" onClick="javascript: sendMessage();" /></td></tr>
	</table>

	<p><small>&copy; incik</small></p>
</body>
</html>
